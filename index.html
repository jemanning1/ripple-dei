<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Ripple - DEI Resource Hub</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding-bottom: 80px;
        }

        .header {
            background: rgba(255, 255, 255, 0.98);
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .header h1 {
            color: #667eea;
            font-size: 32px;
            font-weight: 800;
            letter-spacing: -0.5px;
        }

        /* Animated Ripple background graphic */
        body::before {
            content: '';
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 800px;
            height: 800px;
            background: 
                radial-gradient(circle at center, transparent 30%, rgba(102, 126, 234, 0.03) 30%, transparent 32%),
                radial-gradient(circle at center, transparent 40%, rgba(102, 126, 234, 0.05) 40%, transparent 42%),
                radial-gradient(circle at center, transparent 50%, rgba(102, 126, 234, 0.07) 50%, transparent 52%),
                radial-gradient(circle at center, transparent 60%, rgba(102, 126, 234, 0.05) 60%, transparent 62%),
                radial-gradient(circle at center, transparent 70%, rgba(102, 126, 234, 0.03) 70%, transparent 72%);
            filter: blur(1px);
            z-index: 0;
            pointer-events: none;
            opacity: 0.6;
            animation: pulseRipple 8s ease-in-out infinite;
        }

        @keyframes pulseRipple {
            0%, 100% { opacity: 0.6; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.4; transform: translate(-50%, -50%) scale(1.05); }
        }

        .header .tagline {
            color: #666;
            font-size: 14px;
            font-style: italic;
            text-align: center;
        }

        .search-container {
            padding: 20px;
            position: relative;
            z-index: 10;
        }

        .search-box {
            width: 100%;
            padding: 18px 20px;
            border: none;
            border-radius: 30px;
            background: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            font-size: 18px;
            position: relative;
            z-index: 11;
            transition: box-shadow 0.3s, transform 0.2s;
        }

        .search-box:focus {
            outline: none;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
            transform: translateY(-1px);
        }

        .category-tabs {
            display: flex;
            overflow-x: auto;
            padding: 0 20px 20px;
            gap: 12px;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .category-tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid rgba(102, 126, 234, 0.3);
            padding: 18px 28px;
            border-radius: 35px;
            font-size: 17px;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            position: relative;
            color: #667eea;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            min-height: 56px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .tab.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transform: scale(1.05);
        }

        /* Category colors */
        .tab[data-category="workplace"].active { background: #667eea; border-color: #667eea; }
        .tab[data-category="hiring"].active { background: #00b894; border-color: #00b894; }
        .tab[data-category="leadership"].active { background: #fd79a8; border-color: #fd79a8; }
        .tab[data-category="accessibility"].active { background: #fdcb6e; border-color: #fdcb6e; color: #333; }
        .tab[data-category="language"].active { background: #6c5ce7; border-color: #6c5ce7; }
        .tab[data-category="policy"].active { background: #e17055; border-color: #e17055; }
        .tab[data-category="favorites"].active { background: #d63031; border-color: #d63031; }

        .content {
            padding: 0 20px;
        }

        /* Section Headers */
        .section-header {
            color: white;
            font-size: 20px;
            font-weight: 700;
            margin: 20px 0 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-header .icon {
            font-size: 24px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 24px;
            margin-bottom: 18px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
            min-height: 120px;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
        }

        /* Category-specific card accents */
        .card[data-category="hiring"]::before { background: linear-gradient(180deg, #00b894 0%, #00a383 100%); }
        .card[data-category="leadership"]::before { background: linear-gradient(180deg, #fd79a8 0%, #fc5c9c 100%); }
        .card[data-category="accessibility"]::before { background: linear-gradient(180deg, #fdcb6e 0%, #fbb731 100%); }
        .card[data-category="language"]::before { background: linear-gradient(180deg, #6c5ce7 0%, #5f3dc4 100%); }
        .card[data-category="policy"]::before { background: linear-gradient(180deg, #e17055 0%, #d63031 100%); }

        .card:hover {
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }

        .card:active {
            transform: scale(0.98);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 10px;
        }

        .card-title {
            font-size: 19px;
            font-weight: 600;
            color: #333;
            flex: 1;
            line-height: 1.4;
        }

        .card-icon {
            font-size: 24px;
            margin-left: 10px;
        }

        .card-description {
            color: #666;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .card-meta {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
            align-items: center;
        }

        .tag {
            background: #f0f0f0;
            padding: 5px 12px;
            border-radius: 12px;
            font-size: 12px;
            color: #666;
        }

        .tag.new {
            background: #e8eaf6;
            color: #667eea;
            font-weight: 600;
        }

        .favorite-btn {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: 0;
            margin-left: auto;
            transition: transform 0.2s;
        }

        .favorite-btn:hover {
            transform: scale(1.2);
        }

        .favorite-btn.active {
            animation: heartBeat 0.3s ease-in-out;
        }

        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.3); }
            50% { transform: scale(1.1); }
        }

        .floating-action {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 70px;
            height: 70px;
            border-radius: 35px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: 4px solid white;
            font-size: 36px;
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.5);
            cursor: pointer;
            z-index: 1000;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 300;
            line-height: 1;
        }

        .floating-action:active {
            transform: scale(0.95);
        }

        .floating-action:hover {
            transform: scale(1.05);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            position: absolute;
            bottom: 0;
            width: 100%;
            max-height: 90vh;
            background: white;
            border-radius: 20px 20px 0 0;
            padding: 30px 20px;
            overflow-y: auto;
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 22px;
            font-weight: 600;
            color: #333;
            flex: 1;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .icon-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #667eea;
            padding: 5px;
            transition: transform 0.2s;
        }

        .icon-btn:hover {
            transform: scale(1.1);
        }

        .icon-btn:active {
            transform: scale(0.95);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #999;
        }

        .detail-section {
            margin-bottom: 20px;
        }

        .detail-section h3 {
            font-size: 16px;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 10px;
        }

        .detail-section p, .detail-section ul {
            color: #666;
            font-size: 15px;
            line-height: 1.6;
        }

        .detail-section ul {
            padding-left: 20px;
        }

        .detail-section li {
            margin-bottom: 8px;
        }

        .resource-link {
            display: block;
            background: #f8f9fa;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 10px;
            text-decoration: none;
            color: #667eea;
            font-weight: 500;
            transition: background 0.2s;
        }

        .resource-link:hover {
            background: #e9ecef;
        }

        .contact-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .contact-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .contact-info {
            color: #666;
            font-size: 14px;
        }

        .stats-container {
            padding: 10px 20px 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .stat-box {
            text-align: center;
            padding: 20px 30px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            min-width: 140px;
        }

        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: #667eea;
            display: block;
            line-height: 1.2;
        }

        .stat-label {
            font-size: 13px;
            color: #333;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 8px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 15px;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .submit-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        .submit-btn:active {
            opacity: 0.9;
        }

        .success-message {
            background: #00b894;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: white;
        }

        .empty-state-icon {
            font-size: 60px;
            margin-bottom: 15px;
        }

        .empty-state-text {
            font-size: 18px;
            opacity: 0.9;
        }

        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 14px;
            z-index: 3000;
            display: none;
            animation: toastIn 0.3s ease-out;
        }

        @keyframes toastIn {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        /* Related Resources */
        .related-resources {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .related-resource-item {
            background: white;
            padding: 10px 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid #667eea;
        }

        .related-resource-item:hover {
            background: #f0f0f0;
            transform: translateX(5px);
        }

        .related-resource-title {
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        /* Responsive */
        @media (min-width: 768px) {
            .modal-content {
                bottom: auto;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 90%;
                max-width: 600px;
                max-height: 85vh;
                border-radius: 20px;
                animation: scaleIn 0.3s;
            }

            @keyframes scaleIn {
                from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
                to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            }
        }

        /* High Contrast Mode */
        body.high-contrast { background: #000; }
        body.high-contrast .header { background: #000; border-bottom: 3px solid #fff; }
        body.high-contrast .header h1, body.high-contrast .header .tagline, body.high-contrast .card-title, body.high-contrast .card-description, body.high-contrast .stat-number, body.high-contrast .stat-label, body.high-contrast .modal-title, body.high-contrast .detail-section h3, body.high-contrast .detail-section p, body.high-contrast .detail-section li, body.high-contrast .section-header, body.high-contrast .empty-state, body.high-contrast .form-group label { color: #fff; }
        body.high-contrast .search-box, body.high-contrast .card, body.high-contrast .stat-box, body.high-contrast .modal-content, body.high-contrast .form-group input, body.high-contrast .form-group textarea, body.high-contrast .form-group select { background: #000; border: 3px solid #fff; color: #fff; }
        body.high-contrast .tab { background: #000; border: 3px solid #fff; color: #fff; }
        body.high-contrast .tab.active { background: #fff; color: #000; }
        body.high-contrast .tag { background: #fff; color: #000; }
        body.high-contrast .resource-link { background: #000; border: 2px solid #fff; color: #fff; }
        .contrast-toggle { position: fixed; bottom: 110px; right: 24px; width: 56px; height: 56px; border-radius: 28px; background: white; border: 2px solid #667eea; cursor: pointer; z-index: 1000; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); transition: transform 0.2s; }
        .contrast-toggle:hover { transform: scale(1.05); }
        body.high-contrast .contrast-toggle { background: #000; border-color: #fff; color: #fff; }

        /* Skip to Content Link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #667eea;
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 0 0 4px 0;
            z-index: 10000;
        }
        .skip-link:focus {
            top: 0;
        }

        /* Reduced Motion Support */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <a href="#content" class="skip-link">Skip to main content</a>
    <div class="header">
        <div class="logo-section">
            <div style="position: relative; display: inline-block;">
                <svg width="120" height="120" viewBox="0 0 120 120" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 0; opacity: 0.15;">
                    <circle cx="60" cy="60" r="15" fill="none" stroke="#667eea" stroke-width="3"/>
                    <circle cx="60" cy="60" r="28" fill="none" stroke="#667eea" stroke-width="2.5"/>
                    <circle cx="60" cy="60" r="41" fill="none" stroke="#667eea" stroke-width="2"/>
                    <circle cx="60" cy="60" r="54" fill="none" stroke="#764ba2" stroke-width="1.5"/>
                </svg>
                <h1 style="position: relative; z-index: 1; margin: 0;">Ripple</h1>
            </div>
        </div>
        <p class="tagline">A DEI Knowledge Hub for the Irish Public Service and Semi-State DEI Collaboration Group</p>
        <button onclick="openModal('aboutModal')" style="position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.9); border: 2px solid #667eea; color: #667eea; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; cursor: pointer; font-weight: bold; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" aria-label="About Ripple">?</button>
    </div>

    <div class="stats-container">
        <div class="stat-box">
            <div class="stat-number" id="resourceCount">12</div>
            <div class="stat-label">Resources</div>
        </div>
        <div class="stat-box">
            <div class="stat-number" id="contributorCount">8</div>
            <div class="stat-label">Contributors</div>
        </div>
        <div class="stat-box">
            <div class="stat-number" id="topicCount">6</div>
            <div class="stat-label">Topics</div>
        </div>
    </div>

    <div class="search-container">
        <input type="text" class="search-box" id="searchBox" placeholder="üîç Search DEI topics, questions, resources..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
    </div>

    <div class="category-tabs" id="categoryTabs">
        <button class="tab active" data-category="all">All</button>
        <button class="tab" data-category="workplace">Workplace</button>
        <button class="tab" data-category="hiring">Hiring & Recruiting</button>
        <button class="tab" data-category="leadership">Leadership</button>
        <button class="tab" data-category="accessibility">Accessibility</button>
        <button class="tab" data-category="language">Inclusive Language</button>
        <button class="tab" data-category="policy">Policy & Legal</button>
        <button class="tab" data-category="favorites">‚ù§Ô∏è My Favourites</button>
    </div>

    <div class="content" id="content" role="main" aria-live="polite" aria-atomic="false">
        <!-- Content will be dynamically inserted here -->
    </div>

    <button class="floating-action" id="addButton" title="Create a Ripple">+</button>

    <!-- High Contrast Toggle -->
    <button class="contrast-toggle" id="contrastToggle" title="Toggle High Contrast">‚óê</button>

    <!-- Toast notification -->
    <div class="toast" id="toast"></div>

    <!-- Footer -->
    <div style="text-align: center; padding: 40px 20px 30px; color: rgba(255,255,255,0.9); font-size: 14px; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 40px;">
        <p style="margin: 0 0 8px 0; font-style: italic;">Ripple is a collaborative DEI knowledge hub developed by and for the Irish Public Service and Semi-State DEI Collaboration Group.</p>
        <p style="margin: 0; font-size: 12px; opacity: 0.8;">¬© 2026 Jacqueline Manning. Licensed under CC BY-NC-SA 4.0 for non-commercial use.</p>
    </div>

    <!-- Detail Modal -->
    <div class="modal" id="detailModal">
        <div class="modal-content" id="detailContent">
            <!-- Detail content will be inserted here -->
        </div>
    </div>

    <!-- Submit Modal -->
    <div class="modal" id="submitModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Contribute to Ripple</h2>
                <button class="close-btn" id="closeSubmit" aria-label="Close dialog">&times;</button>
            </div>
            <p style="color: #666; margin-bottom: 20px;">
                Share a resource or ask a question to help build our collaborative DEI knowledge base. Questions will be answered by the group and both questions and resources are reviewed before appearing on the platform (typically within 1-2 weeks).
            </p>
            <div class="success-message" id="successMessage">
                ‚úÖ Thank you. Your contribution has been submitted for review.
            </div>
            <form id="submitForm">
                <div class="form-group">
                    <label>What would you like to do?</label>
                    <select id="submissionType" required>
                        <option value="">Select...</option>
                        <option value="question">Ask a Question</option>
                        <option value="resource">Share a Resource</option>
                    </select>
                </div>
                <div class="form-group" id="resourceTypeGroup" style="display: none;">
                    <label>Resource Type</label>
                    <select id="resourceType">
                        <option value="">Select type...</option>
                        <option value="article">Article / Guide</option>
                        <option value="tool">Tool / Template</option>
                        <option value="policy">Policy Example</option>
                        <option value="training">Training Resource</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select id="submitCategory" required>
                        <option value="">Select category...</option>
                        <option value="workplace">Workplace</option>
                        <option value="hiring">Hiring & Recruiting</option>
                        <option value="leadership">Leadership</option>
                        <option value="accessibility">Accessibility</option>
                        <option value="language">Inclusive Language</option>
                        <option value="policy">Policy & Legal</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label id="titleLabel">Title</label>
                    <input type="text" id="submitTitle" required placeholder="Brief, descriptive title">
                </div>
                <div class="form-group">
                    <label id="descriptionLabel">Description</label>
                    <textarea id="submitDescription" required placeholder="Detailed explanation..."></textarea>
                </div>
                <div class="form-group" id="linkGroup">
                    <label>Source/Link (optional)</label>
                    <input type="url" id="submitLink" placeholder="https://...">
                </div>
                <div class="form-group">
                    <label>Your Name/Organisation (optional)</label>
                    <input type="text" id="submitName" placeholder="How should we credit you?">
                </div>
                <button type="submit" class="submit-btn">Submit Resource</button>
            </form>
        </div>
    </div>

    <!-- About Modal -->
    <div class="modal" id="aboutModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">About Ripple</h2>
                <button class="close-btn" onclick="closeModal('aboutModal')" aria-label="Close dialog">&times;</button>
            </div>
            
            <div style="padding: 20px; line-height: 1.6;">
                <h3 style="color: #667eea; margin-top: 0;">What is Ripple?</h3>
                <p>Ripple is a collaborative DEI (Diversity, Equity, and Inclusion) knowledge hub created by and for the Irish Public Service and Semi-State DEI Collaboration Group.</p>
                
                <p>We believe DEI knowledge should be:</p>
                <ul style="margin: 10px 0; padding-left: 20px;">
                    <li><strong>Accessible</strong> - Available on any device, searchable, easy to find</li>
                    <li><strong>Practical</strong> - Real-world guidance for everyday situations</li>
                    <li><strong>Collaborative</strong> - Shared wisdom across organisations</li>
                    <li><strong>Irish-focused</strong> - Relevant to our context, laws, and culture</li>
                </ul>

                <h3 style="color: #667eea; margin-top: 20px;">How It Works</h3>
                
                <p><strong>üìö Browse Resources</strong><br>
                Search or filter by category to find guidance on workplace DEI topics, from pronouns to accessibility to hiring practices.</p>
                
                <p><strong>‚ù§Ô∏è Save Favourites</strong><br>
                Click the heart icon on any resource to save it to your favourites for quick access later.</p>
                
                <p><strong>‚ùì Ask Questions</strong><br>
                Have a DEI question? Ask the community! Click the + button and select "Ask a Question". The collaborative group will review and answer, then add the best responses as permanent resources.</p>
                
                <p><strong>ü§ù Share Resources</strong><br>
                Have a guide, policy, or lesson learned? Share it with the + button. Select "Share a Resource" to contribute your organisation's knowledge.</p>
                
                <p><strong>üîó Share with Colleagues</strong><br>
                Use the share button in resource details to copy a link and share specific resources with your team.</p>

                <h3 style="color: #667eea; margin-top: 20px;">What Happens When I Submit?</h3>
                <p>Questions and resources go to the collaborative group for review. Questions get answered and the best responses become resources. Approved content typically appears on the site within 1-2 weeks. You'll be credited for your contribution (or can remain anonymous if you prefer).</p>

                <h3 style="color: #667eea; margin-top: 20px;">Who's Behind This?</h3>
                <p>Ripple is a collaborative project of the Irish Public Service and Semi-State DEI Collaboration Group - DEI practitioners working together to share knowledge and best practices across organisations.</p>

                <h3 style="color: #667eea; margin-top: 20px; font-size: 16px;">Disclaimer</h3>
                <p style="font-size: 13px; color: #666;">Ripple provides general DEI guidance and resources for informational purposes only. Content does not constitute legal, HR, or professional advice. We do not control or endorse external websites linked from this platform. While resources are reviewed by the collaborative group, we cannot guarantee completeness or accuracy. Always consult qualified professionals for specific situations and verify information for your organisational context.</p>

                <p style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee; font-size: 14px; color: #666;">
                Created by Jacqueline Manning ‚Ä¢ Licensed under CC BY-NC-SA 4.0 for non-commercial use
                </p>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // GOOGLE SHEETS CONFIGURATION
        // ============================================
        
        const GOOGLE_SHEET_ID = '11LebZb5fZ_8tdZgb82gdwYKuxBEbqkL08NONUjg2wx8';
        const SHEET_NAME = 'Published Resources';
        
        // ============================================
        // DATA LOADING
        // ============================================
        
        let resources = [];
        let currentCategory = 'all';
        let currentSearch = '';
        let favorites = JSON.parse(localStorage.getItem('rippleFavorites')) || [];
        let isLoading = true;

        // Load resources from Google Sheets
        async function loadResourcesFromSheet() {
            try {
                const url = `https://docs.google.com/spreadsheets/d/${GOOGLE_SHEET_ID}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(SHEET_NAME)}`;
                
                const response = await fetch(url);
                const text = await response.text();
                
                // Parse Google's JSON response (it's wrapped in a function call)
                const json = JSON.parse(text.substr(47).slice(0, -2));
                
                // Convert sheet data to resources array
                const rows = json.table.rows;
                resources = rows.map((row, index) => {
                    const cells = row.c;
                    
                    // Parse strategies (semicolon-separated)
                    const strategiesText = cells[6]?.v || '';
                    const strategies = strategiesText.split(';').map(s => s.trim()).filter(s => s);
                    
                    // Parse additional resources (format: "Title URL; Title URL")
                    const resourcesText = cells[7]?.v || '';
                    const additionalResources = resourcesText.split(';').map(r => {
                        const parts = r.trim().split(' ');
                        if (parts.length < 2) return null;
                        const url = parts.pop();
                        const title = parts.join(' ');
                        return { title, url };
                    }).filter(r => r);
                    
                    // Parse tags (comma-separated)
                    const tagsText = cells[8]?.v || '';
                    const tags = tagsText.split(',').map(t => t.trim()).filter(t => t);
                    
                    // Parse date - Google Sheets may send as number or formatted string
                    let dateAdded = cells[9]?.v || new Date().toISOString().split('T')[0];
                    if (typeof dateAdded === 'number') {
                        // Convert Excel serial date to JavaScript date
                        dateAdded = new Date((dateAdded - 25569) * 86400 * 1000).toISOString().split('T')[0];
                    } else if (cells[9]?.f) {
                        // If it's a formatted value, use that
                        dateAdded = cells[9].f;
                    }
                    
                    return {
                        id: cells[0]?.v || index + 1,
                        category: cells[1]?.v || 'workplace',
                        title: cells[2]?.v || 'Untitled',
                        icon: cells[3]?.v || 'üìö',
                        description: cells[4]?.v || '',
                        details: {
                            answer: cells[5]?.v || '',
                            strategies: strategies,
                            resources: additionalResources,
                            experts: []
                        },
                        tags: tags,
                        dateAdded: dateAdded,
                        submittedBy: cells[10]?.v || 'Anonymous',
                        isNew: cells[11]?.v === 'TRUE' || cells[11]?.v === true
                    };
                });
                
                isLoading = false;
                updateStats();
                renderResources();
                
            } catch (error) {
                console.error('Error loading resources from Google Sheets:', error);
                isLoading = false;
                
                // Show error message
                document.getElementById('content').innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">‚ö†Ô∏è</div>
                        <div class="empty-state-text">
                            Unable to load resources. Please check:<br>
                            <small style="margin-top: 10px; display: block;">
                            1. Google Sheet ID is correct<br>
                            2. Sheet is published to web<br>
                            3. Tab name is "Published Resources"
                            </small>
                        </div>
                    </div>
                `;
            }
        }
        
        // Load resources on page load
        loadResourcesFromSheet();

        // High Contrast Mode
        const contrastToggle = document.getElementById('contrastToggle');
        if (localStorage.getItem('highContrast') === 'true') {
            document.body.classList.add('high-contrast');
        }
        contrastToggle.addEventListener('click', () => {
            document.body.classList.toggle('high-contrast');
            const isEnabled = document.body.classList.contains('high-contrast');
            localStorage.setItem('highContrast', isEnabled);
            showToast(isEnabled ? 'High contrast enabled' : 'High contrast disabled');
        });

        function updateStats() {
            const resourceCount = resources.length;
            const contributors = new Set();
            resources.forEach(r => {
                if (r.submittedBy) contributors.add(r.submittedBy);
            });
            
            const categories = new Set(resources.map(r => r.category));
            
            document.getElementById('resourceCount').textContent = resourceCount;
            document.getElementById('contributorCount').textContent = contributors.size;
            document.getElementById('topicCount').textContent = categories.size;
        }

        function toggleFavorite(id, event) {
            event.stopPropagation();
            const index = favorites.indexOf(id);
            if (index > -1) {
                favorites.splice(index, 1);
                showToast('Removed from favourites');
            } else {
                favorites.push(id);
                showToast('Added to favourites ‚ù§Ô∏è');
            }
            localStorage.setItem('rippleFavorites', JSON.stringify(favorites));
            renderResources();
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.display = 'block';
            setTimeout(() => {
                toast.style.display = 'none';
            }, 2000);
        }

        function copyLink(id, event) {
            event.stopPropagation();
            const url = window.location.href.split('?')[0] + '?resource=' + id;
            navigator.clipboard.writeText(url).then(() => {
                showToast('Link copied to clipboard! üîó');
            });
        }

        function renderResources() {
            const content = document.getElementById('content');
            let filtered = resources;

            // Filter by category
            if (currentCategory === 'favorites') {
                filtered = filtered.filter(r => favorites.includes(r.id));
            } else if (currentCategory !== 'all') {
                filtered = filtered.filter(r => r.category === currentCategory);
            }

            // Filter by search
            if (currentSearch) {
                const search = currentSearch.toLowerCase();
                filtered = filtered.filter(r => 
                    r.title.toLowerCase().includes(search) ||
                    r.description.toLowerCase().includes(search) ||
                    r.tags.some(tag => tag.includes(search))
                );
            }

            if (filtered.length === 0) {
                content.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üîç</div>
                        <div class="empty-state-text">No resources found. Try a different search or category.</div>
                    </div>
                `;
                return;
            }

            // Separate new resources
            const newResources = filtered.filter(r => r.isNew);
            const otherResources = filtered.filter(r => !r.isNew);

            // Sort Recently Added by date (newest first)
            newResources.sort((a, b) => {
                const dateA = new Date(a.dateAdded);
                const dateB = new Date(b.dateAdded);
                return dateB - dateA; // Newest first
            });

            // Sort All Resources alphabetically by title
            otherResources.sort((a, b) => {
                return a.title.localeCompare(b.title, 'en', { sensitivity: 'base' });
            });

            let html = '';

            // Show "Recently Added" section if there are new resources and we're in "All" view
            if (newResources.length > 0 && currentCategory === 'all' && !currentSearch) {
                html += '<div class="section-header"><span class="icon">‚ú®</span> Recently Added</div>';
                html += newResources.map(resource => createCard(resource)).join('');
                
                if (otherResources.length > 0) {
                    html += '<div class="section-header"><span class="icon">üìö</span> All Resources</div>';
                    html += otherResources.map(resource => createCard(resource)).join('');
                }
            } else {
                html = filtered.map(resource => createCard(resource)).join('');
            }

            content.innerHTML = html;
        }

        function createCard(resource) {
            const isFavorite = favorites.includes(resource.id);
            return `
                <div class="card" data-category="${resource.category}" onclick="showDetail(${resource.id})">
                    <div class="card-header">
                        <div class="card-title">${resource.title}</div>
                        <div class="card-icon">${resource.icon}</div>
                    </div>
                    <div class="card-description">${resource.description}</div>
                    <div class="card-meta">
                        ${resource.isNew ? '<span class="tag new">NEW</span>' : ''}
                        ${resource.tags.slice(0, 3).map(tag => `<span class="tag">${tag}</span>`).join('')}
                        <button class="favorite-btn ${isFavorite ? 'active' : ''}" onclick="toggleFavorite(${resource.id}, event)" title="${isFavorite ? 'Remove from favorites' : 'Add to favorites'}" aria-label="${isFavorite ? 'Remove from favorites' : 'Add to favorites'}">
                            ${isFavorite ? '‚ù§Ô∏è' : 'ü§ç'}
                        </button>
                    </div>
                </div>
            `;
        }

        function getRelatedResources(resource) {
            return resources
                .filter(r => r.id !== resource.id)
                .filter(r => 
                    r.category === resource.category || 
                    r.tags.some(tag => resource.tags.includes(tag))
                )
                .slice(0, 3);
        }

        function showDetail(id) {
            const resource = resources.find(r => r.id === id);
            if (!resource) return;

            const modal = document.getElementById('detailModal');
            const content = document.getElementById('detailContent');
            const isFavorite = favorites.includes(resource.id);
            const relatedResources = getRelatedResources(resource);

            content.innerHTML = `
                <div class="modal-header">
                    <h2 class="modal-title">${resource.icon} ${resource.title}</h2>
                    <div class="modal-actions">
                        <button class="icon-btn" onclick="copyLink(${resource.id}, event)" title="Share this resource" aria-label="Share this resource">üîó</button>
                        <button class="icon-btn favorite-btn ${isFavorite ? 'active' : ''}" onclick="toggleFavorite(${resource.id}, event)" title="${isFavorite ? 'Remove from favorites' : 'Add to favorites'}" aria-label="${isFavorite ? 'Remove from favorites' : 'Add to favorites'}">
                            ${isFavorite ? '‚ù§Ô∏è' : 'ü§ç'}
                        </button>
                        <button class="close-btn" onclick="closeModal('detailModal')" aria-label="Close dialog">&times;</button>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>Overview</h3>
                    <p>${resource.details.answer}</p>
                </div>

                ${resource.details.strategies ? `
                    <div class="detail-section">
                        <h3>Key Strategies</h3>
                        <ul>
                            ${resource.details.strategies.map(s => `<li>${s}</li>`).join('')}
                        </ul>
                    </div>
                ` : ''}

                ${resource.details.resources && resource.details.resources.length > 0 ? `
                    <div class="detail-section">
                        <h3>Additional Resources</h3>
                        ${resource.details.resources.map(r => `
                            <a href="${r.url}" class="resource-link" target="_blank" rel="noopener noreferrer">
                                üìö ${r.title}
                            </a>
                        `).join('')}
                    </div>
                ` : ''}

                ${resource.details.experts && resource.details.experts.length > 0 ? `
                    <div class="detail-section">
                        <h3>Expert Contacts</h3>
                        ${resource.details.experts.map(e => `
                            <div class="contact-card">
                                <div class="contact-name">üë§ ${e.name}</div>
                                <div class="contact-info">${e.role}</div>
                                <div class="contact-info">üìß ${e.contact}</div>
                            </div>
                        `).join('')}
                    </div>
                ` : ''}

                ${relatedResources.length > 0 ? `
                    <div class="detail-section">
                        <h3>Related Resources</h3>
                        <div class="related-resources">
                            ${relatedResources.map(r => `
                                <div class="related-resource-item" onclick="showDetail(${r.id})">
                                    <div class="related-resource-title">${r.icon} ${r.title}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                ` : ''}

                <div class="detail-section">
                    <p style="font-size: 13px; color: #999; font-style: italic;">
                        Last updated: ${new Date(resource.dateAdded).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
                    </p>
                </div>
            `;

            modal.style.display = 'block';
            
            // Scroll modal content to top
            content.scrollTop = 0;
        }

        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.style.display = 'block';
            
            // Focus management - move focus to modal
            setTimeout(() => {
                const firstButton = modal.querySelector('button, [href], input, select, textarea');
                if (firstButton) firstButton.focus();
            }, 100);
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // ESC key to close modals
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const modals = document.querySelectorAll('.modal');
                modals.forEach(modal => {
                    if (modal.style.display === 'block') {
                        modal.style.display = 'none';
                    }
                });
            }
        });

        // Check for shared resource in URL
        window.addEventListener('load', () => {
            const params = new URLSearchParams(window.location.search);
            const resourceId = params.get('resource');
            if (resourceId) {
                showDetail(parseInt(resourceId));
            }
        });

        // Event listeners
        let searchTimeout;
        document.getElementById('searchBox').addEventListener('input', (e) => {
            currentSearch = e.target.value;
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                renderResources();
            }, 150);
        });

        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', (e) => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                e.target.classList.add('active');
                currentCategory = e.target.dataset.category;
                currentSearch = '';
                document.getElementById('searchBox').value = '';
                renderResources();
            });
        });

        document.getElementById('addButton').addEventListener('click', () => {
            document.getElementById('submitModal').style.display = 'block';
        });

        document.getElementById('submissionType').addEventListener('change', (e) => {
            const isQuestion = e.target.value === 'question';
            const isResource = e.target.value === 'resource';
            
            document.getElementById('resourceTypeGroup').style.display = isResource ? 'block' : 'none';
            
            if (isQuestion) {
                document.getElementById('titleLabel').textContent = 'Your Question';
                document.getElementById('submitTitle').placeholder = 'e.g., How do I handle pronouns in email signatures?';
                document.getElementById('descriptionLabel').textContent = 'Additional Context (optional)';
                document.getElementById('submitDescription').placeholder = 'Provide any relevant details or context...';
                document.getElementById('submitDescription').required = false;
                document.getElementById('linkGroup').style.display = 'none';
            } else if (isResource) {
                document.getElementById('titleLabel').textContent = 'Resource Title';
                document.getElementById('submitTitle').placeholder = 'Brief, descriptive title';
                document.getElementById('descriptionLabel').textContent = 'Description';
                document.getElementById('submitDescription').placeholder = 'Detailed explanation or answer...';
                document.getElementById('submitDescription').required = true;
                document.getElementById('linkGroup').style.display = 'block';
            }
        });

        document.getElementById('closeSubmit').addEventListener('click', () => {
            closeModal('submitModal');
        });

        document.getElementById('submitForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            document.getElementById('successMessage').style.display = 'block';
            
            try {
                const iframe = document.createElement('iframe');
                iframe.name = 'hidden_iframe';
                iframe.style.display = 'none';
                document.body.appendChild(iframe);
                
                const form = document.createElement('form');
                form.action = 'https://script.google.com/macros/s/AKfycbyTolVBsFDbZglH_KlgKxhFH-_uX2nPiOIsU1rPhgAvmmqFNRc65IEgED1d6xU1T9xzsA/exec';
                form.method = 'POST';
                form.target = 'hidden_iframe';
                
                const fields = {
                    submissionType: document.getElementById('submissionType').value,
                    resourceType: document.getElementById('resourceType').value || 'N/A',
                    category: document.getElementById('submitCategory').value,
                    title: document.getElementById('submitTitle').value,
                    description: document.getElementById('submitDescription').value,
                    link: document.getElementById('submitLink').value,
                    submittedBy: document.getElementById('submitName').value || 'Anonymous'
                };
                
                Object.keys(fields).forEach(key => {
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = key;
                    input.value = fields[key];
                    form.appendChild(input);
                });
                
                document.body.appendChild(form);
                form.submit();
                
                setTimeout(() => {
                    document.body.removeChild(form);
                    document.body.removeChild(iframe);
                    document.getElementById('successMessage').style.display = 'none';
                    closeModal('submitModal');
                    document.getElementById('submitForm').reset();
                }, 2500);
                
            } catch (error) {
                console.error('Submission error:', error);
                document.getElementById('successMessage').style.display = 'none';
                alert('There was an error submitting your resource. Please try again or email directly to jemanning1@gmail.com');
            }
        });

        // Close modals when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });

        // Close modals when tapping outside on mobile
        window.addEventListener('touchend', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });
    </script>
</body>
</html>
